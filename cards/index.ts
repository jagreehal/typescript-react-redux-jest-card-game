import { Card, FlippedCard } from '../types';

export function flipCard(card: Card): FlippedCard {
  return Object.assign(Object.create(null), card, { flipped: true });
}

export const cardAclubs: Card = {
  display: 'A',
  flipped: false,
  suit: 'clubs',
  value: 1
};
export const card2clubs: Card = {
  value: 2,
  display: '2',
  suit: 'clubs',
  flipped: false
};
export const card3clubs: Card = {
  value: 3,
  display: '3',
  suit: 'clubs',
  flipped: false
};
export const card4clubs: Card = {
  value: 4,
  display: '4',
  suit: 'clubs',
  flipped: false
};
export const card5clubs: Card = {
  value: 5,
  display: '5',
  suit: 'clubs',
  flipped: false
};
export const card6clubs: Card = {
  value: 6,
  display: '6',
  suit: 'clubs',
  flipped: false
};
export const card7clubs: Card = {
  value: 7,
  display: '7',
  suit: 'clubs',
  flipped: false
};
export const card8clubs: Card = {
  value: 8,
  display: '8',
  suit: 'clubs',
  flipped: false
};
export const card9clubs: Card = {
  value: 9,
  display: '9',
  suit: 'clubs',
  flipped: false
};
export const card10clubs: Card = {
  value: 10,
  display: '10',
  suit: 'clubs',
  flipped: false
};
export const cardJclubs: Card = {
  value: 11,
  display: 'J',
  suit: 'clubs',
  flipped: false
};
export const cardQclubs: Card = {
  value: 12,
  display: 'Q',
  suit: 'clubs',
  flipped: false
};
export const cardKclubs: Card = {
  value: 13,
  display: 'K',
  suit: 'clubs',
  flipped: false
};

export const cardAhearts: Card = {
  value: 1,
  display: 'A',
  suit: 'hearts',
  flipped: false
};
export const card2hearts: Card = {
  value: 2,
  display: '2',
  suit: 'hearts',
  flipped: false
};
export const card3hearts: Card = {
  value: 3,
  display: '3',
  suit: 'hearts',
  flipped: false
};
export const card4hearts: Card = {
  value: 4,
  display: '4',
  suit: 'hearts',
  flipped: false
};
export const card5hearts: Card = {
  value: 5,
  display: '5',
  suit: 'hearts',
  flipped: false
};
export const card6hearts: Card = {
  value: 6,
  display: '6',
  suit: 'hearts',
  flipped: false
};
export const card7hearts: Card = {
  value: 7,
  display: '7',
  suit: 'hearts',
  flipped: false
};
export const card8hearts: Card = {
  value: 8,
  display: '8',
  suit: 'hearts',
  flipped: false
};
export const card9hearts: Card = {
  value: 9,
  display: '9',
  suit: 'hearts',
  flipped: false
};
export const card10hearts: Card = {
  value: 10,
  display: '10',
  suit: 'hearts',
  flipped: false
};
export const cardJhearts: Card = {
  value: 11,
  display: 'J',
  suit: 'hearts',
  flipped: false
};
export const cardQhearts: Card = {
  value: 12,
  display: 'Q',
  suit: 'hearts',
  flipped: false
};
export const cardKhearts: Card = {
  value: 13,
  display: 'K',
  suit: 'hearts',
  flipped: false
};

export const cardAspades: Card = {
  value: 1,
  display: 'A',
  suit: 'spades',
  flipped: false
};
export const card2spades: Card = {
  value: 2,
  display: '2',
  suit: 'spades',
  flipped: false
};
export const card3spades: Card = {
  value: 3,
  display: '3',
  suit: 'spades',
  flipped: false
};
export const card4spades: Card = {
  value: 4,
  display: '4',
  suit: 'spades',
  flipped: false
};
export const card5spades: Card = {
  value: 5,
  display: '5',
  suit: 'spades',
  flipped: false
};
export const card6spades: Card = {
  value: 6,
  display: '6',
  suit: 'spades',
  flipped: false
};
export const card7spades: Card = {
  value: 7,
  display: '7',
  suit: 'spades',
  flipped: false
};
export const card8spades: Card = {
  value: 8,
  display: '8',
  suit: 'spades',
  flipped: false
};
export const card9spades: Card = {
  value: 9,
  display: '9',
  suit: 'spades',
  flipped: false
};
export const card10spades: Card = {
  value: 10,
  display: '10',
  suit: 'spades',
  flipped: false
};
export const cardJspades: Card = {
  value: 11,
  display: 'J',
  suit: 'spades',
  flipped: false
};
export const cardQspades: Card = {
  value: 12,
  display: 'Q',
  suit: 'spades',
  flipped: false
};
export const cardKspades: Card = {
  value: 13,
  display: 'K',
  suit: 'spades',
  flipped: false
};

export const cardAdiamonds: Card = {
  value: 1,
  display: 'A',
  suit: 'diamonds',
  flipped: false
};
export const card2diamonds: Card = {
  value: 2,
  display: '2',
  suit: 'diamonds',
  flipped: false
};
export const card3diamonds: Card = {
  value: 3,
  display: '3',
  suit: 'diamonds',
  flipped: false
};
export const card4diamonds: Card = {
  value: 4,
  display: '4',
  suit: 'diamonds',
  flipped: false
};
export const card5diamonds: Card = {
  value: 5,
  display: '5',
  suit: 'diamonds',
  flipped: false
};
export const card6diamonds: Card = {
  value: 6,
  display: '6',
  suit: 'diamonds',
  flipped: false
};
export const card7diamonds: Card = {
  value: 7,
  display: '7',
  suit: 'diamonds',
  flipped: false
};
export const card8diamonds: Card = {
  value: 8,
  display: '8',
  suit: 'diamonds',
  flipped: false
};
export const card9diamonds: Card = {
  value: 9,
  display: '9',
  suit: 'diamonds',
  flipped: false
};

export const card10diamonds: Card = {
  value: 10,
  display: '10',
  suit: 'diamonds',
  flipped: false
};
export const cardJdiamonds: Card = {
  value: 11,
  display: 'J',
  suit: 'diamonds',
  flipped: false
};
export const cardQdiamonds: Card = {
  value: 12,
  display: 'Q',
  suit: 'diamonds',
  flipped: false
};
export const cardKdiamonds: Card = {
  value: 13,
  display: 'K',
  suit: 'diamonds',
  flipped: false
};

export const cards: Card[] = [
  cardAclubs,
  card2clubs,
  card3clubs,
  card4clubs,
  card5clubs,
  card6clubs,
  card7clubs,
  card8clubs,
  card9clubs,
  card10clubs,
  cardJclubs,
  cardQclubs,
  cardKclubs,
  cardAhearts,
  card2hearts,
  card3hearts,
  card4hearts,
  card5hearts,
  card6hearts,
  card7hearts,
  card8hearts,
  card9hearts,
  card10hearts,
  cardJhearts,
  cardQhearts,
  cardKhearts,
  cardAspades,
  card2spades,
  card3spades,
  card4spades,
  card5spades,
  card6spades,
  card7spades,
  card8spades,
  card9spades,
  card10spades,
  cardJspades,
  cardQspades,
  cardKspades,
  cardAdiamonds,
  card2diamonds,
  card3diamonds,
  card4diamonds,
  card5diamonds,
  card6diamonds,
  card7diamonds,
  card8diamonds,
  card9diamonds,
  card10diamonds,
  cardJdiamonds,
  cardQdiamonds,
  cardKdiamonds
];

export function shuffle(input: Card[]): Card[] {
  const cards = input.slice(0);
  let currentIndex = cards.length;
  let temporaryValue;
  let randomIndex;

  // While there remain elements to shuffle...
  while (0 !== currentIndex) {
    // Pick a remaining element...
    randomIndex = Math.floor(Math.random() * currentIndex);
    currentIndex -= 1;

    // And swap it with the current element.
    temporaryValue = cards[currentIndex];
    cards[currentIndex] = cards[randomIndex];
    cards[randomIndex] = temporaryValue;
  }

  return cards;
}

export function notNextToEachOther(cards: Card[]): boolean {
  // tslint:disable-next-line:no-increment-decrement
  for (let i = 0; i < cards.length - 1; i++) {
    if (cards[i].value === cards[i + 1].value) {
      return false;
    }
  }
  return true;
}

export function getShuffledCardsForGame(input: Card[]): Card[] {
  let cards = shuffle(input.slice(0));
  while (!notNextToEachOther(cards)) {
    cards = shuffle(input.slice(0));
  }
  return cards;
}
